# 숙박편 유효성 검사 기능

## 개요
여행 계획에서 숙박편 추가 시 날짜 충돌 및 여행 기간 초과를 방지하는 유효성 검사 기능이 구현되었습니다.

## 주요 기능

### 1. 날짜 충돌 검사
- 기존 숙박편과 새로 추가할 숙박편의 체크인/체크아웃 날짜가 겹치는지 확인
- 연속 숙박 허용 (A숙소 체크아웃 = B숙소 체크인)

### 2. 여행 기간 검사
- 숙박편의 체크인/체크아웃 날짜가 여행 시작일~마지막일 범위 내에 있는지 확인

### 3. 사용자 친화적 피드백
- Alert 컴포넌트를 통한 시각적 경고 메시지
- 오류 타입별 차별화된 메시지 (에러/경고)
- 자동 숨김 기능 (5초 후)

## 유효성 검사 규칙

### EX1: 기본 충돌 검사
```
기존: A숙소(7/21 체크인 ~ 7/24 체크아웃)
- ✅ B숙소(7/24 체크인 ~ 7/26 체크아웃) → 가능 (연속 숙박)
- ❌ C숙소(7/22 체크인 ~ 7/26 체크아웃) → 불가능 (날짜 겹침)
```

### EX2: 다중 숙박편 충돌 검사
```
기존: A숙소(7/21~7/24), B숙소(7/28~7/30)
- ✅ C숙소(7/24~7/28) → 가능 (연속 숙박)
- ❌ D숙소(7/22~7/28) → 불가능 (A숙소와 겹침)
- ❌ E숙소(7/24~7/29) → 불가능 (B숙소와 겹침)
```

## 구현된 파일

### 1. `utils/accommodationValidation.js`
- 유효성 검사 로직 구현
- 날짜 파싱 및 포맷팅 유틸리티
- 기존 숙박편 추출 함수

### 2. `AccommodationPlan.js`
- 숙박편 추가 시 유효성 검사 적용
- Alert 컴포넌트를 통한 사용자 피드백
- 객실별 추가 시에도 동일한 검사 적용

### 3. `TravelPlanner.js`
- 필요한 props 전달 (dayOrder, startDate, travelPlans)

### 4. `ScheduleList.js`
- 숙박편 시각화 개선
- 정보 툴팁 추가

## 사용법

1. **숙소 계획 탭**에서 숙소 검색
2. 원하는 숙소 선택 후 **상세정보** 클릭
3. 객실 선택 후 **일정에 추가** 버튼 클릭
4. 유효성 검사 결과에 따라:
   - ✅ **통과**: 바로 추가
   - ⚠️ **경고**: 확인 후 선택적 추가
   - ❌ **오류**: 추가 불가

## 오류 타입

| 타입 | 심각도 | 설명 | 강제 추가 |
|------|--------|------|-----------|
| `INVALID_DATE_RANGE` | 오류 | 체크아웃이 체크인보다 빠름 | 불가 |
| `OUTSIDE_TRAVEL_PERIOD` | 경고 | 여행 기간 초과 | 가능 |
| `DATE_CONFLICT` | 경고 | 기존 숙박편과 겹침 | 가능 |

## 시각적 피드백

- **주황색 박스**: 숙박편 일정
- **파란색 박스**: 항공편 일정
- **흰색 박스**: 일반 일정 (드래그 가능)
- **Alert 메시지**: 유효성 검사 결과

## 향후 개선 사항

1. 숙박편 수정 시 유효성 검사
2. 더 세밀한 시간 단위 검사
3. 숙박편 자동 정렬 기능
4. 숙박편 추천 시스템 